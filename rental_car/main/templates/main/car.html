{% extends "main/includes/base.html" %}

{% block title %}{{ car.brand }} {{ car.model }}{% endblock %}

{% block content %}

<div class="container mt-4">

  <h2 class="mb-3">{{ car.brand }} {{ car.model }}</h2>
  <hr>

  <!-- TOP ROW -->
  <div class="row">

    <!-- LEFT: Image -->
    <div class="col-md-6">
      <img
        src="{{ car.image_url }}"
        alt="{{ car.brand }}"
        class="img-fluid rounded"
      >
    </div>

    <!-- RIGHT: Rent Section -->
    <div class="col-md-6">
      <h4>Rent This Car</h4>

      {% if user.is_authenticated %}

        {% if car.with_driver %}
          <p class="text-muted">Driver included.</p>
        {% endif %}

        <form method="POST" action="{% url 'rent_car' car.car_id %}">
          {% csrf_token %}

          <label class="form-label">Start Date</label>
          <input type="date" name="start_date" class="form-control mb-2" required>

          <label class="form-label">End Date</label>
          <input type="date" name="end_date" class="form-control mb-3" required>

          <button class="btn btn-success w-100">
            Rent for ${{ car.fee }} per day
          </button>
        </form>

      {% else %}
        <p class="text-danger mt-3">
          <strong>You must be logged in to rent this car.</strong>
        </p>
        <a href="{% url 'login' %}" class="btn btn-primary w-100">Login</a>
      {% endif %}
    </div>

  </div>

  <!-- SPECIFICATIONS (UNDER IMAGE) -->
  <div class="row mt-4">
    <div class="col-md-6">

        <h4 class="mb-3">Specifications</h4>

        <div class="border rounded p-3 bg-light">
          	<table class="table table-borderless table-sm mb-0">
            	<tbody>
            		<tr>
            		  <td class="text-muted fw-semibold">Brand</td>
            		  <td>{{ car.brand }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">Model</td>
            		  <td>{{ car.model }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">Year</td>
            		  <td>{{ car.production_year }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">Color</td>
            		  <td>{{ car.color|default:"—" }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">Seats</td>
            		  <td>{{ car.seats|default:"—" }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">Fuel</td>
            		  <td>{{ car.fuel|default:"—" }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">Gearbox</td>
            		  <td>{{ car.gearbox|default:"—" }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">City</td>
            		  <td>{{ car.city|default:"—" }}</td>
            		</tr>
            		<tr>
            		  <td class="text-muted fw-semibold">Country</td>
            		  <td>{{ car.country|default:"—" }}</td>
            		</tr>
				
            		{% if car.description %}
            		<tr class="border-top">
            		  <td class="text-muted fw-semibold align-top">Description</td>
            		  <td>{{ car.description }}</td>
            		</tr>
            		{% endif %}
            	</tbody>
          	</table>
  		</div>
	</div>
</div>

{% endblock %}
