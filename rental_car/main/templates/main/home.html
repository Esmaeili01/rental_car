{% extends "main/includes/base.html" %}
{% block title %}Home - Car Rental{% endblock %}

{% block content %}

<!-- Search bar -->
<div class="row mb-3">
  <div class="col-12">
    <form method="GET" action="{% url 'home' %}" class="d-flex">
      <input
        type="text"
        name="q"
        class="form-control me-2"
        placeholder="Search by brand or model"
        value="{{ request.GET.q }}"
      >
      <button class="btn btn-primary" type="submit">Search</button>
    </form>
  </div>
</div>

<div class="row">

  <!-- Filters -->
  <div class="col-md-3 mb-3">
    <h5>Filters</h5>
    <form method="GET" action="{% url 'home' %}">
      <div class="mb-2">
        <label class="form-label">Category</label>
        <select class="form-select" name="category">
          <option value="">All</option>
          <option value="sedan">Sedan</option>
          <option value="suv">SUV</option>
          <option value="hatchback">Hatchback</option>
          <option value="truck">Truck</option>
          <option value="van">Van</option>
        </select>
      </div>

      <div class="mb-2">
        <label class="form-label">Gearbox</label>
        <select class="form-select" name="gearbox">
          <option value="">All</option>
          <option value="manual">Manual</option>
          <option value="automatic">Automatic</option>
        </select>
      </div>

      <div class="mb-2">
        <label class="form-label">Fuel</label>
        <select class="form-select" name="fuel">
          <option value="">All</option>
          <option value="gasoline">Gasoline</option>
          <option value="diesel">Diesel</option>
          <option value="electric">Electric</option>
          <option value="hybrid">Hybrid</option>
        </select>
      </div>

      <div class="mb-2">
        <label class="form-label">Seats</label>
        <input type="number" name="seats" class="form-control" min="1">
      </div>

      <button class="btn btn-secondary w-100" type="submit">
        Apply Filters
      </button>
    </form>
  </div>

  <!-- Cars -->
  <div class="col-md-9">
    <h2 class="mb-4">Available Cars</h2>

    <div class="row">
      {% for car in cars %}
        <div class="col-md-4 mb-4">

          <!-- Clickable card -->
          <a href="{% url 'car' car.car_id %}" class="text-decoration-none text-dark">
            <div class="card h-100 cars_card">

              <img
                src="{{ car.image_url }}"
                alt="{{ car.brand }}"
                style="height: 220px; object-fit: cover;"
              >

              <div class="card-body text-center">
                <h5 class="card-title mb-2">
                  {{ car.brand }} {{ car.model }}
                </h5>
                <p class="mb-0">${{ car.fee }} / day</p>
              </div>

            </div>
          </a>

        </div>
      {% empty %}
        <p>No cars available right now.</p>
      {% endfor %}
    </div>
  </div>

</div>
{% endblock %}
