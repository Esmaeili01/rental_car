{% extends 'base.html' %}
{% load static %}

{% block title %}Home - RentaCar{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold">Find Your Perfect Car</h1>
                <p class="lead">Rent premium vehicles at unbeatable prices. From economy cars to luxury rides, we have everything you need for your journey.</p>
                <div class="d-flex gap-3">
                    <a href="{% url 'cars:car-list-view' %}" class="btn btn-light btn-lg">
                        <i class="bi bi-search me-2"></i>Browse Cars
                    </a>
                    <a href="#features" class="btn btn-outline-light btn-lg">
                        <i class="bi bi-info-circle me-2"></i>Learn More
                    </a>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <i class="bi bi-car-front-fill" style="font-size: 15rem; opacity: 0.1;"></i>
            </div>
        </div>
    </div>
</section>

<!-- Search Form -->
<section class="container">
    <div class="search-form">
        <h3 class="text-center mb-4">
            <i class="bi bi-search me-2"></i>Quick Car Search
        </h3>
        <form method="GET" action="{% url 'cars:car-list-view' %}" id="car-search-form">
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="location" class="form-label">Pickup Location</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-geo-alt"></i></span>
                        <input type="text" class="form-control" id="location" name="location" placeholder="City or Airport">
                    </div>
                </div>
                <div class="col-md-3">
                    <label for="pickup_date" class="form-label">Pickup Date</label>
                    <input type="date" class="form-control" id="pickup_date" name="pickup_date" required>
                </div>
                <div class="col-md-3">
                    <label for="return_date" class="form-label">Return Date</label>
                    <input type="date" class="form-control" id="return_date" name="return_date" required>
                </div>
                <div class="col-md-2">
                    <label class="form-label">&nbsp;</label>
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-search me-2"></i>Search
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>

<!-- Featured Cars -->
<section class="container my-5">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h2 class="display-6 fw-bold">Featured Cars</h2>
            <p class="text-muted">Discover our most popular rental vehicles</p>
        </div>
    </div>
    
    <div class="row g-4">
        {% for car in featured_cars %}
        <div class="col-lg-4 col-md-6">
            <div class="card car-card h-100">
                <div class="car-image position-relative">
                    {% if car.image %}
                        <img src="{{ car.image.url }}" alt="{{ car.full_name }}" class="w-100 h-100 object-fit-cover">
                    {% else %}
                        <i class="bi bi-car-front placeholder"></i>
                    {% endif %}
                    
                    <div class="price-tag">
                        ${{ car.daily_rate }}/day
                    </div>
                    
                    <div class="status-badge status-{{ car.status }}">
                        {{ car.get_status_display }}
                    </div>
                </div>
                
                <div class="car-details">
                    <h5 class="car-title">{{ car.full_name }}</h5>
                    
                    <div class="car-specs">
                        <div class="car-spec">
                            <i class="bi bi-people"></i>
                            <span>{{ car.seats }} seats</span>
                        </div>
                        <div class="car-spec">
                            <i class="bi bi-gear"></i>
                            <span>{{ car.get_transmission_display }}</span>
                        </div>
                        <div class="car-spec">
                            <i class="bi bi-fuel-pump"></i>
                            <span>{{ car.get_fuel_type_display }}</span>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="text-muted small">
                            <i class="bi bi-star-fill text-warning"></i>
                            <span>4.8 (125 reviews)</span>
                        </div>
                        
                        {% if car.status == 'available' %}
                            <button class="btn btn-primary btn-book-car" 
                                    data-car-id="{{ car.id }}" 
                                    data-car-name="{{ car.full_name }}" 
                                    data-daily-rate="{{ car.daily_rate }}">
                                <i class="bi bi-calendar-check me-1"></i>Book Now
                            </button>
                        {% else %}
                            <button class="btn btn-secondary" disabled>
                                <i class="bi bi-x-circle me-1"></i>{{ car.get_status_display }}
                            </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center">
            <div class="alert alert-info">
                <i class="bi bi-info-circle me-2"></i>
                No featured cars available at the moment. <a href="{% url 'cars:car-list-view' %}" class="alert-link">Browse all cars</a>
            </div>
        </div>
        {% endfor %}
    </div>
    
    {% if featured_cars %}
    <div class="text-center mt-4">
        <a href="{% url 'cars:car-list-view' %}" class="btn btn-outline-primary btn-lg">
            <i class="bi bi-arrow-right me-2"></i>View All Cars
        </a>
    </div>
    {% endif %}
</section>

<!-- Features Section -->
<section id="features" class="container-fluid bg-light py-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="display-6 fw-bold">Why Choose RentaCar?</h2>
                <p class="text-muted">Experience the difference with our premium service</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h5 class="fw-bold">Fully Insured</h5>
                    <p class="text-muted">Comprehensive insurance coverage for your peace of mind on every rental.</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-clock"></i>
                    </div>
                    <h5 class="fw-bold">24/7 Support</h5>
                    <p class="text-muted">Round-the-clock customer service to assist you whenever you need help.</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-car-front"></i>
                    </div>
                    <h5 class="fw-bold">Premium Fleet</h5>
                    <p class="text-muted">Well-maintained, latest model vehicles from top manufacturers worldwide.</p>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-currency-dollar"></i>
                    </div>
                    <h5 class="fw-bold">Best Prices</h5>
                    <p class="text-muted">Competitive rates with no hidden fees. What you see is what you pay.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-number">{{ stats.total_cars|default:"50+" }}</div>
                <div class="stat-label">Premium Vehicles</div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-number">{{ stats.total_customers|default:"1000+" }}</div>
                <div class="stat-label">Happy Customers</div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-number">{{ stats.total_rentals|default:"5000+" }}</div>
                <div class="stat-label">Completed Rentals</div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-number">{{ stats.cities|default:"25+" }}</div>
                <div class="stat-label">Cities Covered</div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="container my-5">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h2 class="display-6 fw-bold">Car Categories</h2>
            <p class="text-muted">Choose from our diverse range of vehicle categories</p>
        </div>
    </div>
    
    <div class="row g-4">
        {% for category in categories %}
        <div class="col-lg-4 col-md-6">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <div class="display-1 text-primary mb-3">
                        {% if category.name == 'economy' %}
                            <i class="bi bi-car-front"></i>
                        {% elif category.name == 'luxury' %}
                            <i class="bi bi-gem"></i>
                        {% elif category.name == 'suv' %}
                            <i class="bi bi-truck"></i>
                        {% else %}
                            <i class="bi bi-car-front-fill"></i>
                        {% endif %}
                    </div>
                    <h5 class="card-title fw-bold">{{ category.get_name_display }}</h5>
                    <p class="card-text text-muted">{{ category.description }}</p>
                    <div class="mb-3">
                        <span class="badge bg-primary fs-6">From ${{ category.base_price_per_day }}/day</span>
                    </div>
                    <a href="{% url 'cars:car-list-view' %}?category={{ category.name }}" class="btn btn-outline-primary">
                        <i class="bi bi-arrow-right me-1"></i>View Cars
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center">
            <p class="text-muted">No categories available at the moment.</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- CTA Section -->
<section class="container-fluid bg-primary text-white py-5">
    <div class="container text-center">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="display-6 fw-bold mb-4">Ready to Hit the Road?</h2>
                <p class="lead mb-4">Book your perfect car today and experience the freedom of the open road with our premium rental service.</p>
                <a href="{% url 'cars:car-list-view' %}" class="btn btn-light btn-lg me-3">
                    <i class="bi bi-search me-2"></i>Find Your Car
                </a>
                <a href="#" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-telephone me-2"></i>Call Now
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Set minimum dates for search form
document.addEventListener('DOMContentLoaded', function() {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('pickup_date').min = today;
    document.getElementById('return_date').min = today;
    
    // Update return date minimum when pickup date changes
    document.getElementById('pickup_date').addEventListener('change', function() {
        document.getElementById('return_date').min = this.value;
    });
});
</script>
{% endblock %}